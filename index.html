<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Maintenance Tracker">
    
    <title>Apartment Society Maintenance Tracker v2</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQXBhcnRtZW50IE1haW50ZW5hbmNlIFRyYWNrZXIiLCJzaG9ydF9uYW1lIjoiTWFpbnRlbmFuY2UiLCJzdGFydF91cmwiOiIuIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI2ZmZmZmZiIsInRoZW1lX2NvbG9yIjoiIzY2N2VlYSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSFpwWlhkQ2IzZzlJakFnTUNBeE1qZ2dNVEk0SWo0OGNtVmpkQ0IzYVdSMGFEMGlNVEk0SWlCb1pXbG5hSFE5SWpFeU9DSWdabWxzYkQwaUl6WTJOMlZsWVNJdlBqd3ZjM1puUGc9PSIsInNpemVzIjoiMTI4eDEyOCIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dfQ==">
    
    <style>
        :root {
            --primary-color: #667eea;
            --primary-dark: #5568d3;
            --secondary-color: #764ba2;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-bg: #f8f9fa;
            --border-color: #e0e0e0;
            --text-primary: #333;
            --text-secondary: #666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            padding: 0;
        }

        /* Mobile-first design */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        /* Login Screen */
        .login-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 100%;
        }

        .login-box h2 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
        }

        .login-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .login-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .login-tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            margin-bottom: -2px;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-left h1 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .header-left p {
            font-size: 12px;
            opacity: 0.9;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            text-align: right;
        }

        .user-info .user-name {
            font-weight: 600;
            font-size: 14px;
        }

        .user-info .user-role {
            font-size: 11px;
            opacity: 0.8;
        }

        .btn-logout {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
        }

        .btn-logout:hover {
            background: rgba(255,255,255,0.3);
        }

        .nav-tabs {
            display: flex;
            background: var(--light-bg);
            border-bottom: 2px solid var(--border-color);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .nav-tab {
            flex: 1;
            min-width: 120px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            background: transparent;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            white-space: nowrap;
        }

        .nav-tab.active {
            background: white;
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .nav-tab:hover {
            background: #fff;
        }

        .content {
            padding: 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 18px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-block;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-block {
            width: 100%;
            display: block;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .stat-card h4 {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .stat-card .value {
            font-size: 24px;
            font-weight: 700;
        }

        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            font-size: 13px;
        }

        th, td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--light-bg);
            font-weight: 600;
            color: var(--text-primary);
            position: sticky;
            top: 0;
        }

        tr:hover {
            background: var(--light-bg);
        }

        .status-paid {
            color: var(--success-color);
            font-weight: 600;
        }

        .status-pending {
            color: var(--danger-color);
            font-weight: 600;
        }

        .status-partial {
            color: var(--warning-color);
            font-weight: 600;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .badge-info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert-info {
            background: #d1ecf1;
            border-color: #0c5460;
            color: #0c5460;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #856404;
            color: #856404;
        }

        .alert-success {
            background: #d4edda;
            border-color: #155724;
            color: #155724;
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #721c24;
            color: #721c24;
        }

        .search-filter-bar {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .filter-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        .filter-row .form-group {
            flex: 1;
            min-width: 150px;
            margin-bottom: 0;
        }

        .history-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .payment-record {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: var(--light-bg);
            border-radius: 4px;
            margin-top: 10px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--primary-color);
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .excess-amount {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: 600;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 5px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary-color);
            border: 2px solid white;
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            left: -19px;
            top: 15px;
            width: 2px;
            height: 100%;
            background: var(--border-color);
        }

        .timeline-item:last-child::after {
            display: none;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 15px;
            }

            .header-left h1 {
                font-size: 16px;
            }

            .header-right {
                gap: 10px;
            }

            .user-info {
                display: none;
            }

            .content {
                padding: 15px;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }

            .nav-tab {
                font-size: 12px;
                padding: 12px 8px;
            }

            .stat-card .value {
                font-size: 20px;
            }

            .filter-row {
                flex-direction: column;
            }

            .filter-row .form-group {
                width: 100%;
            }

            table {
                font-size: 11px;
            }

            th, td {
                padding: 8px 4px;
            }

            .login-box {
                padding: 30px 20px;
            }
        }

        /* PWA Install Banner */
        .install-banner {
            background: var(--info-color);
            color: white;
            padding: 15px;
            text-align: center;
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
        }

        .install-banner.show {
            display: block;
        }

        .install-banner button {
            background: white;
            color: var(--info-color);
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            margin: 5px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            margin-top: 15px;
        }

        .comparison-table th {
            background: var(--primary-color);
            color: white;
        }

        .highlight-row {
            background: #fff3cd !important;
        }

        /* Hidden class for role-based access */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h2>üè¢ Maintenance Tracker</h2>
            
            <div class="login-tabs">
                <button class="login-tab active" onclick="switchLoginTab('admin')">Admin Login</button>
                <button class="login-tab" onclick="switchLoginTab('member')">Member Login</button>
            </div>

            <!-- Admin Login -->
            <div id="adminLogin" class="login-form">
                <div class="form-group">
                    <label>Admin Username</label>
                    <input type="text" id="adminUsername" placeholder="Enter username" value="admin">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter password" value="admin123">
                </div>
                <button class="btn btn-primary btn-block" onclick="adminLogin()">üîê Login as Admin</button>
                <p style="margin-top: 15px; font-size: 12px; color: #999; text-align: center;">
                    Default: admin / admin123
                </p>
            </div>

            <!-- Member Login -->
            <div id="memberLogin" class="login-form hidden">
                <div class="form-group">
                    <label>House Number</label>
                    <input type="text" id="memberHouseNumber" placeholder="e.g., H001" style="text-transform: uppercase;">
                </div>
                <div class="form-group">
                    <label>Contact Number (Last 4 digits)</label>
                    <input type="text" id="memberContact" placeholder="Last 4 digits" maxlength="4">
                </div>
                <button class="btn btn-success btn-block" onclick="memberLogin()">üë§ Login as Member</button>
            </div>
        </div>
    </div>

    <!-- PWA Install Banner -->
    <div id="installBanner" class="install-banner">
        <p>üì± Install this app on your phone for quick access!</p>
        <button onclick="installPWA()">Install</button>
        <button onclick="dismissInstall()">Later</button>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="container hidden">
        <div class="header">
            <div class="header-left">
                <h1 id="societyName">üè¢ Apartment Maintenance</h1>
                <p id="headerSubtitle">Transparent Financial Management</p>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-name" id="userName">Admin User</div>
                    <div class="user-role" id="userRole">Administrator</div>
                </div>
                <button class="btn-logout" onclick="logout()">üö™ Logout</button>
            </div>
        </div>

        <div class="nav-tabs" id="navTabs">
            <!-- Tabs will be dynamically loaded based on user role -->
        </div>

        <div class="content">
            <!-- Dashboard Tab (Common) -->
            <div id="dashboard" class="tab-content active">
                <div class="stats-grid" id="dashboardStats">
                    <!-- Stats will be loaded here -->
                </div>

                <div class="section">
                    <h3>üìä Quick Overview</h3>
                    <div id="quickOverview"></div>
                </div>
            </div>

            <!-- Admin: User Management Tab -->
            <div id="userManagement" class="tab-content">
                <div class="alert alert-info">
                    <strong>User Management:</strong> Manage member accounts and access control.
                </div>

                <div class="section">
                    <h3>üë• All Members</h3>
                    
                    <div class="search-filter-bar">
                        <div class="filter-row">
                            <div class="form-group">
                                <label>Search</label>
                                <input type="text" id="userSearchInput" placeholder="Search by house or owner name...">
                            </div>
                            <div class="form-group">
                                <label>Filter by Status</label>
                                <select id="userFilterStatus">
                                    <option value="">All Status</option>
                                    <option value="Occupied">Occupied</option>
                                    <option value="Interior Ongoing">Interior Ongoing</option>
                                    <option value="Empty">Empty</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Payment Status</label>
                                <select id="userFilterPayment">
                                    <option value="">All</option>
                                    <option value="paid">Paid</option>
                                    <option value="pending">Pending</option>
                                    <option value="partial">Partial</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button class="btn btn-primary" onclick="applyUserFilters()">üîç Search</button>
                            </div>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="usersTable">
                            <thead>
                                <tr>
                                    <th>House</th>
                                    <th>Owner</th>
                                    <th>Contact</th>
                                    <th>Status</th>
                                    <th>Payment Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <tr>
                                    <td colspan="6" class="loading">
                                        <div class="spinner"></div>
                                        Loading users...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="section">
                    <h3>‚ûï Add/Edit Member</h3>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>House Number</label>
                            <input type="text" id="editHouseNumber" readonly style="background: #f0f0f0;">
                        </div>
                        <div class="form-group">
                            <label>Owner Name</label>
                            <input type="text" id="editOwnerName" placeholder="Enter owner name">
                        </div>
                        <div class="form-group">
                            <label>Contact Number</label>
                            <input type="text" id="editContact" placeholder="10-digit mobile">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="editEmail" placeholder="email@example.com">
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="editStatus">
                                <option value="Occupied">Occupied</option>
                                <option value="Interior Ongoing">Interior Ongoing</option>
                                <option value="Empty">Empty</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-success" onclick="saveMemberDetails()">üíæ Save Changes</button>
                    <button class="btn btn-secondary" onclick="cancelEdit()">‚ùå Cancel</button>
                </div>
            </div>

            <!-- Admin: Payment Management -->
            <div id="paymentManagement" class="tab-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>This Month</h4>
                        <div class="value" id="thisMonthCollection">‚Çπ0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Total Collected</h4>
                        <div class="value" id="totalCollected">‚Çπ0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Pending</h4>
                        <div class="value" id="totalPending">‚Çπ0</div>
                    </div>
                    <div class="stat-card">
                        <h4>Collection %</h4>
                        <div class="value" id="collectionRate">0%</div>
                    </div>
                </div>

                <div class="section">
                    <h3>üí≥ Record Payment</h3>
                    <div class="grid-3">
                        <div class="form-group">
                            <label>House Number</label>
                            <select id="paymentHouse">
                                <option value="">Select House</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Amount Paid</label>
                            <input type="number" id="paymentAmount" placeholder="Enter amount">
                        </div>
                        <div class="form-group">
                            <label>Payment Date</label>
                            <input type="date" id="paymentDate">
                        </div>
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Payment Mode</label>
                            <select id="paymentMode">
                                <option value="Cash">Cash</option>
                                <option value="Online Transfer">Online Transfer</option>
                                <option value="Cheque">Cheque</option>
                                <option value="UPI">UPI</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Month/Period</label>
                            <input type="text" id="paymentNotes" placeholder="e.g., January 2025">
                        </div>
                    </div>
                    <button class="btn btn-success" onclick="recordPayment()">‚úÖ Record Payment</button>
                </div>

                <div class="section">
                    <h3>üìã Recent Payments</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>House</th>
                                    <th>Owner</th>
                                    <th>Amount</th>
                                    <th>Mode</th>
                                    <th>Period</th>
                                </tr>
                            </thead>
                            <tbody id="recentPaymentsBody">
                                <tr>
                                    <td colspan="6" class="loading">
                                        <div class="spinner"></div>
                                        Loading recent payments...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Member: My Account -->
            <div id="myAccount" class="tab-content">
                <div class="section">
                    <h3>üè† My Account Details</h3>
                    <div id="memberAccountDetails"></div>
                </div>

                <div class="section">
                    <h3>üí∞ Current Month Charges</h3>
                    <div id="currentChargesBreakdown"></div>
                </div>

                <div class="section">
                    <h3>üìä Payment Summary</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Monthly Due</h4>
                            <div class="value" id="myMonthlyDue">‚Çπ0</div>
                        </div>
                        <div class="stat-card">
                            <h4>Total Paid</h4>
                            <div class="value" id="myTotalPaid">‚Çπ0</div>
                        </div>
                        <div class="stat-card">
                            <h4>Balance</h4>
                            <div class="value" id="myBalance">‚Çπ0</div>
                        </div>
                        <div class="stat-card" id="excessCard" style="display: none;">
                            <h4>Excess Amount</h4>
                            <div class="value" id="myExcess">‚Çπ0</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Historical Charges (Common) -->
            <div id="historicalData" class="tab-content">
                <div class="alert alert-info">
                    <strong>Historical View:</strong> Track all charges and payments since inception.
                </div>

                <div class="section">
                    <h3>üìÖ Filter Historical Data</h3>
                    <div class="grid-3">
                        <div class="form-group">
                            <label>From Date</label>
                            <input type="month" id="historyFromDate">
                        </div>
                        <div class="form-group">
                            <label>To Date</label>
                            <input type="month" id="historyToDate">
                        </div>
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button class="btn btn-primary btn-block" onclick="loadHistoricalData()">üîç Load Data</button>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>üìà Payment Timeline</h3>
                    <div class="timeline" id="paymentTimeline">
                        <!-- Timeline will be loaded here -->
                    </div>
                </div>

                <div class="section">
                    <h3>üìä Monthly Comparison</h3>
                    <div class="table-container">
                        <table class="comparison-table" id="monthlyComparisonTable">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>Due Amount</th>
                                    <th>Paid Amount</th>
                                    <th>Balance</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="monthlyComparisonBody">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="section" id="excessAmountSection" style="display: none;">
                    <h3>üíö Excess Amount Details</h3>
                    <div class="excess-amount" id="excessAmountInfo">
                        <!-- Excess amount details -->
                    </div>
                </div>
            </div>

            <!-- Reports Tab (Admin) -->
            <div id="reports" class="tab-content">
                <div class="section">
                    <h3>üìä Generate Reports</h3>
                    <div class="grid-2">
                        <button class="btn btn-primary" onclick="generateDefaultersList()">üìã Defaulters List</button>
                        <button class="btn btn-primary" onclick="generateMonthlyReport()">üìÖ Monthly Collection</button>
                        <button class="btn btn-primary" onclick="generateChargesSummary()">üí∞ Charges Summary</button>
                        <button class="btn btn-success" onclick="exportAllData()">üì• Export All Data</button>
                    </div>
                </div>

                <div id="reportOutput" class="section" style="display: none;">
                    <h3>Report Output</h3>
                    <div id="reportContent"></div>
                </div>
            </div>

            <!-- Compare Charges (Member) -->
            <div id="compareCharges" class="tab-content">
                <div class="alert alert-info">
                    <strong>Compare Your Charges:</strong> See how your monthly dues compare with other house types.
                </div>

                <div class="section">
                    <h3>üîç Charge Comparison by House Status</h3>
                    <div class="table-container">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Charge Type</th>
                                    <th>Occupied</th>
                                    <th>Interior Ongoing</th>
                                    <th>Empty</th>
                                </tr>
                            </thead>
                            <tbody id="chargeComparisonBody">
                                <!-- Comparison data -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="section">
                    <h3>üìä My Charges Breakdown</h3>
                    <div id="myChargesDetail"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration - REPLACE WITH YOUR WEB APP URL
        const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbytaY2vg6YIOwY69l8uhg2f2TxR8722rVbMDhfHtF-2bHBKAUPru4lHaoxbHuEp8bh8Cg/exec';
        
        // Session Management
        let currentUser = {
            role: null,  // 'admin' or 'member'
            houseNumber: null,
            name: null,
            isLoggedIn: false
        };

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1NlcnZpY2UgV29ya2VyIGluc3RhbGxlZCcpOyB9KTsgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdhY3RpdmF0ZScsIGZ1bmN0aW9uKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdTZXJ2aWNlIFdvcmtlciBhY3RpdmF0ZWQnKTsgfSk7').catch(err => console.log('SW registration failed'));
            });
        }

        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBanner').classList.add('show');
        });

        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    deferredPrompt = null;
                    document.getElementById('installBanner').classList.remove('show');
                });
            }
        }

        function dismissInstall() {
            document.getElementById('installBanner').classList.remove('show');
        }

        // Login Functions
        function switchLoginTab(tab) {
            document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'admin') {
                document.getElementById('adminLogin').classList.remove('hidden');
                document.getElementById('memberLogin').classList.add('hidden');
            } else {
                document.getElementById('adminLogin').classList.add('hidden');
                document.getElementById('memberLogin').classList.remove('hidden');
            }
        }

        async function adminLogin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;

            // Simple authentication (in production, use secure backend)
            if (username === 'admin' && password === 'admin123') {
                currentUser = {
                    role: 'admin',
                    name: 'Administrator',
                    isLoggedIn: true
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showMainApp();
            } else {
                alert('‚ùå Invalid credentials! Try: admin / admin123');
            }
        }

        async function memberLogin() {
            const houseNumber = document.getElementById('memberHouseNumber').value.toUpperCase().trim();
            const contact = document.getElementById('memberContact').value;

            if (!houseNumber || !contact) {
                alert('Please enter both house number and last 4 digits of contact');
                return;
            }

            // Verify member exists
            const member = await apiCall('getMember', { houseNumber: houseNumber });
            
            if (!member || member.error) {
                alert('‚ùå House not found!');
                return;
            }

            // Simple verification using last 4 digits
            const memberContact = member.member.contact || '';
            if (memberContact && memberContact.slice(-4) === contact) {
                currentUser = {
                    role: 'member',
                    houseNumber: houseNumber,
                    name: member.member.ownerName,
                    isLoggedIn: true
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showMainApp();
            } else {
                alert('‚ùå Invalid credentials! Please check your contact number.');
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = { role: null, isLoggedIn: false };
                localStorage.removeItem('currentUser');
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('mainApp').classList.add('hidden');
            }
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            // Update header
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userRole').textContent = currentUser.role === 'admin' ? 'Administrator' : `Member - ${currentUser.houseNumber}`;
            
            // Load appropriate tabs
            loadTabs();
            
            // Load initial data
            loadDashboard();
        }

        function loadTabs() {
            const navTabs = document.getElementById('navTabs');
            navTabs.innerHTML = '';

            if (currentUser.role === 'admin') {
                navTabs.innerHTML = `
                    <button class="nav-tab active" onclick="switchTab('dashboard')">üìä Dashboard</button>
                    <button class="nav-tab" onclick="switchTab('userManagement')">üë• Users</button>
                    <button class="nav-tab" onclick="switchTab('paymentManagement')">üí≥ Payments</button>
                    <button class="nav-tab" onclick="switchTab('historicalData')">üìÖ History</button>
                    <button class="nav-tab" onclick="switchTab('reports')">üìã Reports</button>
                `;
            } else {
                navTabs.innerHTML = `
                    <button class="nav-tab active" onclick="switchTab('dashboard')">üìä Dashboard</button>
                    <button class="nav-tab" onclick="switchTab('myAccount')">üè† My Account</button>
                    <button class="nav-tab" onclick="switchTab('historicalData')">üìÖ History</button>
                    <button class="nav-tab" onclick="switchTab('compareCharges')">üîç Compare</button>
                `;
            }
        }

        function switchTab(tabName) {
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            // Load tab-specific data
            switch(tabName) {
                case 'userManagement':
                    loadAllUsers();
                    break;
                case 'paymentManagement':
                    loadPaymentManagement();
                    break;
                case 'myAccount':
                    loadMyAccount();
                    break;
                case 'historicalData':
                    loadHistoricalData();
                    break;
                case 'compareCharges':
                    loadChargeComparison();
                    break;
            }
        }

        // API Helper Functions
        async function apiCall(action, params = {}, method = 'GET') {
            if (!WEB_APP_URL || WEB_APP_URL.includes('PASTE_YOUR')) {
                console.error('Web App URL not configured');
                return null;
            }
            
            try {
                const url = new URL(WEB_APP_URL);
                url.searchParams.append('action', action);
                
                if (method === 'GET') {
                    Object.keys(params).forEach(key => {
                        url.searchParams.append(key, params[key]);
                    });
                    
                    const response = await fetch(url);
                    return await response.json();
                } else {
                    const formData = new FormData();
                    formData.append('action', action);
                    Object.keys(params).forEach(key => {
                        formData.append(key, params[key]);
                    });
                    
                    const response = await fetch(WEB_APP_URL, {
                        method: 'POST',
                        body: formData
                    });
                    return await response.json();
                }
            } catch (error) {
                console.error('API Error:', error);
                return null;
            }
        }

        // Dashboard
        async function loadDashboard() {
            const stats = await apiCall('getStats');
            
            if (stats) {
                const dashboardStats = document.getElementById('dashboardStats');
                
                if (currentUser.role === 'admin') {
                    dashboardStats.innerHTML = `
                        <div class="stat-card">
                            <h4>Total Houses</h4>
                            <div class="value">${stats.totalHouses}</div>
                        </div>
                        <div class="stat-card">
                            <h4>Collected</h4>
                            <div class="value">‚Çπ${stats.totalCollected.toLocaleString('en-IN')}</div>
                        </div>
                        <div class="stat-card">
                            <h4>Pending</h4>
                            <div class="value">‚Çπ${stats.totalPending.toLocaleString('en-IN')}</div>
                        </div>
                        <div class="stat-card">
                            <h4>Collection Rate</h4>
                            <div class="value">${stats.collectionRate}%</div>
                        </div>
                    `;
                } else {
                    // Load member-specific stats
                    const memberData = await apiCall('getMember', { houseNumber: currentUser.houseNumber });
                    if (memberData && memberData.member) {
                        const m = memberData.member;
                        dashboardStats.innerHTML = `
                            <div class="stat-card">
                                <h4>Monthly Due</h4>
                                <div class="value">‚Çπ${m.monthlyDue.toLocaleString('en-IN')}</div>
                            </div>
                            <div class="stat-card">
                                <h4>Total Paid</h4>
                                <div class="value">‚Çπ${m.totalPaid.toLocaleString('en-IN')}</div>
                            </div>
                            <div class="stat-card">
                                <h4>Balance</h4>
                                <div class="value">‚Çπ${m.balance.toLocaleString('en-IN')}</div>
                            </div>
                            <div class="stat-card">
                                <h4>Status</h4>
                                <div class="value">${m.balance > 0 ? '‚ùå Due' : '‚úÖ Paid'}</div>
                            </div>
                        `;
                    }
                }
            }

            // Quick Overview
            const members = await apiCall('getAllMembers');
            if (members) {
                const quickOverview = document.getElementById('quickOverview');
                const paidCount = members.filter(m => m.balance <= 0).length;
                const pendingCount = members.filter(m => m.balance > 0).length;
                
                quickOverview.innerHTML = `
                    <div class="stats-grid">
                        <div style="background: #d4edda; padding: 20px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 32px; font-weight: 700; color: #155724;">${paidCount}</div>
                            <div style="color: #155724; margin-top: 5px;">‚úÖ Paid Members</div>
                        </div>
                        <div style="background: #f8d7da; padding: 20px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 32px; font-weight: 700; color: #721c24;">${pendingCount}</div>
                            <div style="color: #721c24; margin-top: 5px;">‚ùå Pending Members</div>
                        </div>
                    </div>
                `;
            }
        }

        // User Management
        async function loadAllUsers() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '<tr><td colspan="6" class="loading"><div class="spinner"></div>Loading users...</td></tr>';
            
            const members = await apiCall('getAllMembers');
            
            if (!members || members.error) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align:center; color: red;">Failed to load data</td></tr>';
                return;
            }
            
            tbody.innerHTML = '';
            
            members.forEach(member => {
                const paymentStatus = member.balance > 0 ? 'Pending' : 'Paid';
                const statusClass = member.balance > 0 ? 'badge-danger' : 'badge-success';
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td><strong>${member.houseNumber}</strong></td>
                    <td>${member.ownerName}</td>
                    <td>${member.contact || 'N/A'}</td>
                    <td><span class="badge badge-info">${member.status}</span></td>
                    <td><span class="badge ${statusClass}">${paymentStatus}</span></td>
                    <td>
                        <button class="btn btn-primary btn-sm" onclick='editMember(${JSON.stringify(member)})'>‚úèÔ∏è Edit</button>
                    </td>
                `;
            });

            // Populate payment dropdown
            const select = document.getElementById('paymentHouse');
            select.innerHTML = '<option value="">Select House</option>';
            members.forEach(member => {
                select.innerHTML += `<option value="${member.houseNumber}">${member.houseNumber} - ${member.ownerName}</option>`;
            });
        }

        function editMember(member) {
            document.getElementById('editHouseNumber').value = member.houseNumber;
            document.getElementById('editOwnerName').value = member.ownerName;
            document.getElementById('editContact').value = member.contact || '';
            document.getElementById('editEmail').value = member.email || '';
            document.getElementById('editStatus').value = member.status;
            
            // Scroll to edit section
            document.querySelector('#userManagement .section:last-child').scrollIntoView({ behavior: 'smooth' });
        }

        async function saveMemberDetails() {
            const houseNumber = document.getElementById('editHouseNumber').value;
            const ownerName = document.getElementById('editOwnerName').value;
            const contact = document.getElementById('editContact').value;
            const email = document.getElementById('editEmail').value;
            const status = document.getElementById('editStatus').value;

            if (!houseNumber || !ownerName) {
                alert('Please fill required fields');
                return;
            }

            // In production, call API to update
            alert('‚úÖ Member details saved! (In production, this would update Google Sheets)');
            cancelEdit();
            loadAllUsers();
        }

        function cancelEdit() {
            document.getElementById('editHouseNumber').value = '';
            document.getElementById('editOwnerName').value = '';
            document.getElementById('editContact').value = '';
            document.getElementById('editEmail').value = '';
        }

        function applyUserFilters() {
            const searchTerm = document.getElementById('userSearchInput').value.toLowerCase();
            const statusFilter = document.getElementById('userFilterStatus').value;
            const paymentFilter = document.getElementById('userFilterPayment').value;
            
            const rows = document.querySelectorAll('#usersTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                const matchesSearch = text.includes(searchTerm);
                const matchesStatus = !statusFilter || text.includes(statusFilter.toLowerCase());
                const matchesPayment = !paymentFilter || text.includes(paymentFilter);
                
                row.style.display = (matchesSearch && matchesStatus && matchesPayment) ? '' : 'none';
            });
        }

        // Payment Management
        async function loadPaymentManagement() {
            // Load stats
            const stats = await apiCall('getStats');
            if (stats) {
                document.getElementById('thisMonthCollection').textContent = '‚Çπ' + stats.totalCollected.toLocaleString('en-IN');
                document.getElementById('totalCollected').textContent = '‚Çπ' + stats.totalCollected.toLocaleString('en-IN');
                document.getElementById('totalPending').textContent = '‚Çπ' + stats.totalPending.toLocaleString('en-IN');
                document.getElementById('collectionRate').textContent = stats.collectionRate + '%';
            }

            // Load recent payments (mock data for now)
            const tbody = document.getElementById('recentPaymentsBody');
            tbody.innerHTML = `
                <tr>
                    <td>${new Date().toLocaleDateString('en-IN')}</td>
                    <td>H001</td>
                    <td>Sample Owner</td>
                    <td>‚Çπ1,500</td>
                    <td>UPI</td>
                    <td>January 2025</td>
                </tr>
            `;
        }

        async function recordPayment() {
            const house = document.getElementById('paymentHouse').value;
            const amount = document.getElementById('paymentAmount').value;
            const date = document.getElementById('paymentDate').value;
            const mode = document.getElementById('paymentMode').value;
            const notes = document.getElementById('paymentNotes').value;

            if (!house || !amount || !date) {
                alert('Please fill all required fields!');
                return;
            }

            const result = await apiCall('recordPayment', {
                houseNumber: house,
                amount: amount,
                date: date,
                mode: mode,
                notes: notes
            }, 'POST');
            
            if (result && result.success) {
                alert('‚úÖ Payment recorded successfully! Payment ID: ' + result.paymentId);
                
                // Clear form
                document.getElementById('paymentAmount').value = '';
                document.getElementById('paymentNotes').value = '';
                
                // Refresh
                loadPaymentManagement();
            } else {
                alert('‚ùå Failed to record payment. Please try again.');
            }
        }

        // My Account (Member)
        async function loadMyAccount() {
            const data = await apiCall('getMember', { houseNumber: currentUser.houseNumber });
            
            if (data && data.member) {
                const m = data.member;
                const payments = data.payments || [];
                
                // Account details
                document.getElementById('memberAccountDetails').innerHTML = `
                    <div class="grid-2">
                        <div>
                            <p><strong>House Number:</strong> ${m.houseNumber}</p>
                            <p><strong>Owner Name:</strong> ${m.ownerName}</p>
                            <p><strong>Contact:</strong> ${m.contact || 'Not provided'}</p>
                        </div>
                        <div>
                            <p><strong>Email:</strong> ${m.email || 'Not provided'}</p>
                            <p><strong>Status:</strong> <span class="badge badge-info">${m.status}</span></p>
                        </div>
                    </div>
                `;

                // Current charges
                const charges = await apiCall('getCharges');
                let breakdown = '<table style="width:100%; font-size: 14px;">';
                breakdown += '<tr><th>Charge Type</th><th style="text-align:right;">Your Amount</th></tr>';
                
                if (charges) {
                    charges.forEach(charge => {
                        let perHouse = calculateChargePerHouse(charge, m.status);
                        if (perHouse > 0) {
                            breakdown += `<tr><td>${charge.chargeType}</td><td style="text-align:right;">‚Çπ${Math.round(perHouse)}</td></tr>`;
                        }
                    });
                }
                
                breakdown += `<tr style="font-weight:bold; border-top: 2px solid #333;"><td>Total Monthly Due</td><td style="text-align:right;">‚Çπ${m.monthlyDue}</td></tr>`;
                breakdown += '</table>';
                document.getElementById('currentChargesBreakdown').innerHTML = breakdown;

                // Payment summary
                document.getElementById('myMonthlyDue').textContent = '‚Çπ' + m.monthlyDue.toLocaleString('en-IN');
                document.getElementById('myTotalPaid').textContent = '‚Çπ' + m.totalPaid.toLocaleString('en-IN');
                document.getElementById('myBalance').textContent = '‚Çπ' + Math.abs(m.balance).toLocaleString('en-IN');

                // Check for excess
                if (m.balance < 0) {
                    document.getElementById('excessCard').style.display = 'block';
                    document.getElementById('myExcess').textContent = '‚Çπ' + Math.abs(m.balance).toLocaleString('en-IN');
                }
            }
        }

        function calculateChargePerHouse(charge, status) {
            const occupied = parseInt(localStorage.getItem('occupiedHouses') || 12);
            const interior = parseInt(localStorage.getItem('interiorHouses') || 0);
            
            if (charge.splitType === 'All 53') {
                return charge.amount / 53;
            } else if (charge.splitType === 'Occupied+Interior') {
                if (status === 'Occupied' || status === 'Interior Ongoing') {
                    return charge.amount / (occupied + interior);
                }
                return 0;
            } else if (charge.splitType === 'Special') {
                if (status === 'Occupied' || status === 'Interior Ongoing') {
                    return (charge.amount * 0.7) / (occupied + interior);
                } else {
                    return (charge.amount * 0.3) / (53 - occupied - interior);
                }
            }
            return 0;
        }

        // Historical Data
        async function loadHistoricalData() {
            const houseNumber = currentUser.role === 'member' ? currentUser.houseNumber : null;
            
            // Mock historical data - in production, fetch from backend
            const timeline = document.getElementById('paymentTimeline');
            timeline.innerHTML = `
                <div class="timeline-item">
                    <h4>January 2025</h4>
                    <p>Payment: ‚Çπ1,500 | Status: <span class="status-paid">Paid</span></p>
                    <small>Paid on: 05-Jan-2025 via UPI</small>
                </div>
                <div class="timeline-item">
                    <h4>December 2024</h4>
                    <p>Payment: ‚Çπ1,500 | Status: <span class="status-paid">Paid</span></p>
                    <small>Paid on: 02-Dec-2024 via Cash</small>
                </div>
                <div class="timeline-item">
                    <h4>November 2024</h4>
                    <p>Payment: ‚Çπ1,500 | Status: <span class="status-paid">Paid</span></p>
                    <small>Paid on: 01-Nov-2024 via Online Transfer</small>
                </div>
            `;

            // Monthly comparison
            const comparisonBody = document.getElementById('monthlyComparisonBody');
            const months = ['January 2025', 'December 2024', 'November 2024', 'October 2024'];
            comparisonBody.innerHTML = '';
            
            months.forEach(month => {
                const row = comparisonBody.insertRow();
                row.innerHTML = `
                    <td>${month}</td>
                    <td>‚Çπ1,500</td>
                    <td>‚Çπ1,500</td>
                    <td>‚Çπ0</td>
                    <td><span class="badge badge-success">Paid</span></td>
                `;
            });
        }

        // Charge Comparison
        async function loadChargeComparison() {
            const charges = await apiCall('getCharges');
            
            if (charges) {
                const tbody = document.getElementById('chargeComparisonBody');
                tbody.innerHTML = '';
                
                charges.forEach(charge => {
                    const occupiedCharge = calculateChargePerHouse(charge, 'Occupied');
                    const interiorCharge = calculateChargePerHouse(charge, 'Interior Ongoing');
                    const emptyCharge = calculateChargePerHouse(charge, 'Empty');
                    
                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td>${charge.chargeType}</td>
                        <td>‚Çπ${Math.round(occupiedCharge)}</td>
                        <td>‚Çπ${Math.round(interiorCharge)}</td>
                        <td>‚Çπ${Math.round(emptyCharge)}</td>
                    `;
                });

                // Highlight current user's row
                if (currentUser.role === 'member') {
                    const memberData = await apiCall('getMember', { houseNumber: currentUser.houseNumber });
                    // Add highlighting logic based on status
                }
            }

            // My charges detail
            if (currentUser.role === 'member') {
                const data = await apiCall('getMember', { houseNumber: currentUser.houseNumber });
                if (data && data.member) {
                    document.getElementById('myChargesDetail').innerHTML = `
                        <div class="alert alert-info">
                            <p><strong>Your house status:</strong> ${data.member.status}</p>
                            <p><strong>Your monthly due:</strong> ‚Çπ${data.member.monthlyDue.toLocaleString('en-IN')}</p>
                            <p>The charges vary based on house occupancy status. Occupied and Interior Ongoing houses pay for water charges and higher diesel contribution.</p>
                        </div>
                    `;
                }
            }
        }

        // Reports
        function generateDefaultersList() {
            alert('Generating defaulters list...');
        }

        function generateMonthlyReport() {
            alert('Generating monthly report...');
        }

        function generateChargesSummary() {
            alert('Generating charges summary...');
        }

        function exportAllData() {
            alert('Exporting all data to Excel...');
        }

        // Initialize
        window.addEventListener('load', () => {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                if (currentUser.isLoggedIn) {
                    showMainApp();
                }
            }

            // Set today's date as default
            document.getElementById('paymentDate').valueAsDate = new Date();
        });
    </script>
</body>
</html>
